#!/bin/bash

if [ $# == 0 ]; then
  $0 "caf-measurement"
  $0 "actor-framework"
fi

if [ "$1" == "caf-measurement" ]; then
  cd caf-measurement
  git fetch
  git checkout -f origin/master

  cd numa/distance
  qmake
  make

  cd ../libnuma
  qmake
  make

  cd ../hwloc
  qmake
  make

  cd ../savina
  git fetch
  git checkout -f origin/master
  mvn package
fi

if [ "$1" == "actor-framework" ]; then
  cd actor-framework
  git fetch
  git checkout -f origin/topic/numa_scheduler

  cd benchmarks
  git fetch
  git checkout -f origin/topic/update

  cd ..
  ./configure
  make -j
fi
